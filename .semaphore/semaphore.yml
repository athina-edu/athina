version: v1.0
name: Athina Testing
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: "Build"
    task:
      prologue:
        commands:
          - sem-version python 3.7
      env_vars:
        - name: APP_ENV
          value: prod
      jobs:
      - name: Install system dependencies
        commands:
          - sudo apt-get install -y firejail git 
      - name: Install python prereq.
        commands:
          - checkout
          - sudo pip install .
      - name: Execute python tests
        commands:
          - pytest

